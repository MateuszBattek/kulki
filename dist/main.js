(()=>{"use strict";var t,r,e,i={367:(t,r,e)=>{e.r(r),e.d(r,{Board:()=>n});var i=e(301),s=function(){function t(t,r){this.x=t,this.y=r,this.ball=!1,this.color=i.COLOR.BLACK,this.width=50,this.height=50,this.selected=!1}return t.prototype.setColor=function(t){this.color=t},t.prototype.addBall=function(){this.ball=!0,this.drawBall(15,i.COLOR.WHITE)},t.prototype.select=function(){this.selected=!0,this.drawBall(22,i.COLOR.WHITE)},t.prototype.unselect=function(){this.selected=!1,this.drawBall(15,i.COLOR.WHITE)},t.prototype.drawBall=function(t,r){i.ctx.fillStyle=r,i.ctx.fillRect(this.y*this.width+1,this.x*this.height+1,this.width-2,this.height-2),i.ctx.beginPath(),i.ctx.arc(this.y*this.width+25,this.x*this.height+25,t,0,2*Math.PI),i.ctx.strokeStyle=i.COLOR.BLACK,i.ctx.lineWidth=1,i.ctx.fillStyle=this.color,i.ctx.fill(),i.ctx.stroke(),i.ctx.closePath()},t.prototype.fillWhite=function(){this.ball?this.selected&&this.drawBall(22,i.COLOR.RED):(i.ctx.fillStyle=i.COLOR.WHITE,i.ctx.fillRect(this.y*this.width+1,this.x*this.height+1,this.width-2,this.height-2))},t.prototype.fillGray=function(){this.ball?this.selected&&this.drawBall(22,i.COLOR.RED):(i.ctx.fillStyle="#AAAAAA",i.ctx.fillRect(this.y*this.width+1,this.x*this.height+1,this.width-2,this.height-2))},t.prototype.fillPath=function(){this.ball||(i.ctx.fillStyle=i.COLOR.RED,i.ctx.fillRect(this.y*this.width+1,this.x*this.height+1,this.width-2,this.height-2))},t.prototype.removeBall=function(){this.ball=!1,this.color=i.COLOR.BLACK,this.fillWhite()},t}(),h=function(){function t(t,r,e){this.f=0,this.g=0,this.h=0,this.neighbors=[],this.wall=!1,this.x=t,this.y=r,this.wall=e}return t.prototype.addNeighbors=function(t){var r=this.x,e=this.y;r<8&&this.neighbors.push(t[r+1][e]),r>0&&this.neighbors.push(t[r-1][e]),e<8&&this.neighbors.push(t[r][e+1]),e>0&&this.neighbors.push(t[r][e-1])},t.removeFromArray=function(t,r){for(var e=t.length-1;e>=0;e--)t[e]==r&&t.splice(e,1)},t.heuristic=function(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},t.setUpArray=function(r,e,i,s,h){for(var a=[],l=0;l<9;l++){a.push([]);for(var o=0;o<9;o++)a[l].push(new t(l,o,r[o][l]))}for(var n=0;n<9;n++)for(var c=0;c<9;c++)a[n][c].addNeighbors(a);var u=a[e][i],y=a[h][s];return u.wall=!0,t.getPath(u,y).map((function(t){return[t.x,t.y]}))},t.getPath=function(r,e){var i=[],s=[],h=[],a=!1,l=r;for(s.push(r);!a;){if(!(s.length>0))return[];for(var o=0,n=0;n<s.length;n++)s[n].f<s[o].f&&(o=n);(l=s[o])===e&&(a=!0),t.removeFromArray(s,l),h.push(l);var c=l.neighbors;for(n=0;n<c.length;n++){var u=c[n];if(!h.includes(u)&&!u.wall){var y=l.g+t.heuristic(u,l),f=!1;s.includes(u)?y<u.g&&(u.g=y,f=!0):(u.g=y,f=!0,s.push(u)),f&&(u.h=t.heuristic(u,e),u.f=u.g+u.h,u.previous=l)}}}var p=l;for((i=[]).push(p);p.previous;)i.push(p.previous),p=p.previous;return 1==i.length&&(i=[]),i},t}();function a(t,r,e){var s=["Nice!","Wow!","You're good"],h=["Combo!","That's many balls smashed!","Amazing work"],a=["HOW ARE U DOING THIS?!","YOU ARE INSANE","INCREDIBLE"],l=["Bad","Noob","Get some points","You know how to play?","",""],o=["It's getting dense","You're about to lose","Do something"],n=e.value;e.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=n.apply(this,t);if(i.ctx.fillStyle="White",i.ctx.fillRect(this.width*i.y+10,200,200,180),i.ctx.strokeRect(this.width*i.y+10,200,180,180),i.ctx.fillStyle="Black",i.ctx.font="16px Arial",this.ballsPlaced<=3)return i.ctx.fillText("",this.width*i.y+15,290),e;if(this.vanishArray.length>=i.BALLS_IN_ROW_TO_SMASH+5){var c=Math.floor(Math.random()*a.length);return i.ctx.fillText(a[c],this.width*i.y+15,290),e}return this.vanishArray.length>=i.BALLS_IN_ROW_TO_SMASH+2?(c=Math.floor(Math.random()*h.length),i.ctx.fillText(h[c],this.width*i.y+15,290),e):this.vanishArray.length>=i.BALLS_IN_ROW_TO_SMASH?(c=Math.floor(Math.random()*s.length),i.ctx.fillText(s[c],this.width*i.y+15,290),e):this.ballsPlaced>=50?(c=Math.floor(Math.random()*o.length),i.ctx.fillText(o[c],this.width*i.y+15,290),e):0==this.vanishArray.length?(c=Math.floor(Math.random()*l.length),i.ctx.fillText(l[c],this.width*i.y+15,290),e):e}}var l=function(t,r,e,i){var s,h=arguments.length,a=h<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,r,e,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(h<3?s(a):h>3?s(r,e,a):s(r,e))||a);return h>3&&a&&Object.defineProperty(r,e,a),a},o=function(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)},n=function(){function t(){this.squareArray=[],this.array=[],this.path=[],this.width=50,this.height=50;for(var t=0;t<i.y;t++){this.squareArray.push([]),this.array.push([]);for(var r=0;r<i.x;r++)this.squareArray[t].push(new s(t,r)),this.array[t].push(!1)}this.selected=null,this.disabled=!1,this.lost=!1,this.ballsPlaced=0,this.points=0,this.vanishArray=[],this.colors=this.getRandomColors()}return t.prototype.createCanvas=function(){i.canvas.width=this.width*i.y+200,i.canvas.height=this.height*i.x,document.body.appendChild(i.canvas),i.ctx.strokeStyle=i.COLOR.BLACK,i.ctx.strokeRect(0,0,i.canvas.width-200,i.canvas.height);for(var t=1;t<i.y;t++)i.ctx.beginPath(),i.ctx.moveTo(0,t*this.width),i.ctx.lineTo(i.canvas.width-200,t*this.width),i.ctx.stroke();for(t=1;t<i.x;t++)i.ctx.beginPath(),i.ctx.moveTo(t*this.height,0),i.ctx.lineTo(t*this.height,i.canvas.height),i.ctx.stroke();this.writeStuff(),i.ctx.closePath()},t.prototype.writeStuff=function(){i.ctx.fillStyle=i.COLOR.WHITE,i.ctx.fillRect(this.width*i.y,0,200,i.canvas.height),i.ctx.fillStyle="Black",i.ctx.font="20px Arial",i.ctx.fillText("Points: ",this.width*i.y+10,50),i.ctx.fillText(String(this.points),this.width*i.y+100,50),i.ctx.fillText("Następne: ",this.width*i.y+10,100);for(var t=0;t<this.colors.length;t++)i.ctx.beginPath(),i.ctx.arc(this.width*i.y+10+25+50*t,150,15,0,2*Math.PI),i.ctx.strokeStyle=i.COLOR.BLACK,i.ctx.lineWidth=1,i.ctx.fillStyle=this.colors[t],i.ctx.fill(),i.ctx.stroke(),i.ctx.closePath()},t.prototype.getRandomColors=function(){for(var t=[],r=0;r<3;r++){var e=Object.values(i.COLOR),s=e[Math.floor(Math.random()*e.length)];t.push(s)}return t},t.prototype.spawnNewBalls=function(){var t=this.colors;this.colors=this.getRandomColors(),this.writeStuff();for(var r=0;r<3;){var e=Math.floor(Math.random()*i.x),s=Math.floor(Math.random()*i.y);if(0==this.squareArray[s][e].ball){if(this.squareArray[s][e].setColor(t[r]),this.squareArray[s][e].addBall(),this.array[s][e]=!0,this.ballsPlaced++,this.checkVertically(s,e),this.checkHorizontally(s,e),this.checkDiagonally(s,e),this.smash(),this.vanishArray=[],this.ballsPlaced>=i.x*i.y)return this.lost=!0,void alert("Przegrałeś! Punkty: "+this.points);r++}}},t.prototype.selectBall=function(t){if(!this.disabled&&t.clientX<=this.width*i.y){var r=Math.floor((t.clientX-8)/this.width),e=Math.floor((t.clientY-8)/this.height);if(1==this.squareArray[e][r].ball)return void(0==this.squareArray[e][r].selected?(null!=this.selected&&this.selected.unselect(),this.squareArray[e][r].select(),this.selected=this.squareArray[e][r]):(this.squareArray[e][r].unselect(),this.selected=null));null!=this.selected&&this.path.length>1&&this.moveBall(this.selected,e,r)}},t.prototype.drawPath=function(t){if(null!=this.selected&&t.clientX<=this.width*i.y){var r=this.selected.x,e=this.selected.y,s=Math.floor((t.clientX-8)/this.width),a=Math.floor((t.clientY-8)/this.height),l=h.setUpArray(this.array,e,r,a,s);this.clearAllSquares();for(var o=0,n=l;o<n.length;o++){var c=n[o];this.squareArray[c[1]][c[0]].fillPath()}this.path=l}},t.prototype.leaveTrace=function(){for(var t=0,r=this.path;t<r.length;t++){var e=r[t];this.squareArray[e[1]][e[0]].fillGray()}this.path=[],this.disabled=!0},t.prototype.moveBall=function(t,r,e){var s=this;t.selected=!1,this.selected=null,t.ball=!1,this.array[t.x][t.y]=!1,this.squareArray[r][e].ball=!0,this.squareArray[r][e].setColor(t.color),this.squareArray[r][e].drawBall(15,"#AAAAAA"),this.array[r][e]=!0,this.leaveTrace(),window.setTimeout((function(){if(s.clearAllSquares(),s.disabled=!1,s.squareArray[r][e].drawBall(15,i.COLOR.WHITE),!s.lost){s.checkVertically(r,e),s.checkHorizontally(r,e),s.checkDiagonally(r,e);var t=s.smash();s.writeStuff(),s.vanishArray=[],t||s.spawnNewBalls()}}),1e3)},t.prototype.clearAllSquares=function(){for(var t=0,r=this.squareArray;t<r.length;t++)for(var e=0,i=r[t];e<i.length;e++)i[e].fillWhite()},t.prototype.checkVertically=function(t,r){var e,s=this.squareArray[t][r].color,h=[];h.push(this.squareArray[t][r]);for(var a=1;t-a>=0&&this.squareArray[t-a][r].color==s&&this.squareArray[t-a][r].ball;)h.push(this.squareArray[t-a][r]),a++;for(a=1;t+a<=8&&this.squareArray[t+a][r].color==s&&this.squareArray[t+a][r].ball;)h.push(this.squareArray[t+a][r]),a++;h.length>=i.BALLS_IN_ROW_TO_SMASH&&(e=this.vanishArray).push.apply(e,h)},t.prototype.checkHorizontally=function(t,r){var e,s=this.squareArray[t][r].color,h=[];h.push(this.squareArray[t][r]);for(var a=1;r-a>=0&&this.squareArray[t][r-a].color==s&&this.squareArray[t][r-a].ball;)h.push(this.squareArray[t][r-a]),a++;for(a=1;r+a<=8&&this.squareArray[t][r+a].color==s&&this.squareArray[t][r+a].ball;)h.push(this.squareArray[t][r+a]),a++;h.length>=i.BALLS_IN_ROW_TO_SMASH&&(e=this.vanishArray).push.apply(e,h)},t.prototype.checkDiagonally=function(t,r){var e,s,h=this.squareArray[t][r].color,a=[];a.push(this.squareArray[t][r]);for(var l=1;r-l>=0&&t-l>=0&&this.squareArray[t-l][r-l].color==h&&this.squareArray[t-l][r-l].ball;)a.push(this.squareArray[t-l][r-l]),l++;for(l=1;r+l<=8&&t+l<=8&&this.squareArray[t+l][r+l].color==h&&this.squareArray[t+l][r+l].ball;)a.push(this.squareArray[t+l][r+l]),l++;for(a.length>=i.BALLS_IN_ROW_TO_SMASH&&(e=this.vanishArray).push.apply(e,a),(a=[]).push(this.squareArray[t][r]),l=1;r-l>=0&&t+l<=8&&this.squareArray[t+l][r-l].color==h&&this.squareArray[t+l][r-l].ball;)a.push(this.squareArray[t+l][r-l]),l++;for(l=1;r+l<=8&&t-l>=0&&this.squareArray[t-l][r+l].color==h&&this.squareArray[t-l][r+l].ball;)a.push(this.squareArray[t-l][r+l]),l++;a.length>=i.BALLS_IN_ROW_TO_SMASH&&(s=this.vanishArray).push.apply(s,a)},t.prototype.smash=function(){var t=this.vanishArray.filter((function(t,r,e){return e.indexOf(t)==r}));this.points+=t.length;for(var r=0,e=t;r<e.length;r++){var i=e[r];i.removeBall(),this.array[i.x][i.y]=!1}return this.ballsPlaced-=t.length,t.length>0},t.prototype.startGame=function(){this.createCanvas(),this.spawnNewBalls()},l([a,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"writeStuff",null),l([a,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"smash",null),t}()},301:(t,r,e)=>{var i;e.r(r),e.d(r,{BALLS_IN_ROW_TO_SMASH:()=>o,COLOR:()=>i,canvas:()=>s,ctx:()=>h,x:()=>a,y:()=>l}),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.BLUE="#0000FF",t.RED="#FF0000",t.GREEN="#00FF00",t.YELLOW="#FFFF00",t.ORANGE="#FFA500"}(i||(i={}));var s=document.getElementsByTagName("canvas")[0],h=s.getContext("2d"),a=9,l=9,o=5}},s={};function h(t){var r=s[t];if(void 0!==r)return r.exports;var e=s[t]={exports:{}};return i[t](e,e.exports,h),e.exports}h.d=(t,r)=>{for(var e in r)h.o(r,e)&&!h.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},h.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t=h(367),r=h(301),e=new t.Board,r.canvas.addEventListener("click",(function(t){e.selectBall(t)})),r.canvas.addEventListener("mousemove",(function(t){e.drawPath(t)})),e.startGame(),console.log(e.array)})();